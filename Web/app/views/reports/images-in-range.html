<karma-page class="reports services">
    <md-toolbar>
        <!--
        <div class="main-fab">
            <md-tooltip md-direction="right">
                Exportar a PDF
            </md-tooltip>
            <md-button ng-disabled="!reportData || reportData.items.length == 0" class="md-fab md-accent" aria-label="al" ng-click="export()">
                <md-icon md-svg-src="{{ 'file' | icon:'ic_cloud_download_24px' }}"></md-icon>
            </md-button>
        </div>
        -->
        <div class="md-toolbar-tools">

            <div class="md-toolbar-item md-title">
                <span>Informe de Imagenes Por Fechas</span>
            </div>

        </div>      
    </md-toolbar>

    <!-- LINEAR PROGRESS -->
    <md-progress-linear ng-show="!loadCompleted" md-mode="indeterminate" class="md-primary"></md-progress-linear>

    <karma-content>

        <!-- FILTER'S -->
        <div layout class="filters">
            <!-- -->
            <md-input-container flex="30">
                <label>Desde</label>
                <input ng-model="data.formattedFromDate" readonly="readonly"></input>
            </md-input-container>

            <div flex="5" class="button-form">
                <md-icon ng-click="changeDate('from')" md-svg-src="{{ 'action' | icon:'ic_today_24px' }}"></md-icon>
            </div>
            <!-- -->
            <md-input-container flex="30">
                <label>Hasta</label>
                <input ng-model="data.formattedToDate" readonly="readonly"></input>
            </md-input-container>

            <div flex="5" class="button-form">
                <md-icon ng-click="changeDate('to')" md-svg-src="{{ 'action' | icon:'ic_today_24px' }}"></md-icon>
            </div>
            <!-- -->
            <md-input-container flex="25" ng-class="{'md-input-has-value': data.type }">
                <label>Servicio</label>
                <md-select placeholder="" ng-change="changeType(data.type)" ng-model="data.type" required aria-label="al">
                    <md-option ng-value="item" ng-repeat="item in data.collections.types">
                        {{item.nombre}}
                    </md-option>
                </md-select>
            </md-input-container>
            <!-- -->
        </div>

        <!-- FILTER INITIAL MESSAGE -->
        <filter-message ng-if="!reportData">
            <center>
                
                <md-icon md-svg-src="{{ 'action' | icon:'ic_search_24px' }}"></md-icon>
                <br />
                Ingrese los filtros de busqueda para iniciar la consulta

            </center>
        </filter-message>

        <!-- REPORT EMPTY ROWS -->
        <empty-items ng-if="reportData.items.length == 0">
            <center>
                
                <md-icon md-svg-src="{{ 'notification' | icon:'ic_do_not_disturb_24px' }}"></md-icon>
                <br />
                No existen registros asociados a los filtros seleccionados

            </center>
        </empty-items>

        <!-- REPORT DATA -->
        <div ng-show="reportData.items.length > 0">

            <!-- TABLE ITEMS -->
            <karma-table>
                <karma-column width="5">
                    <karma-item>
                        <template>
                            <div title="Ver Imagen" ng-click="item.showImage()">
                                <md-icon 
                                    style="color: {{ item.imagen ? '#2196F3' : '#DDD'}}"
                                    ng-class="{'pointer': item.imagen}"
                                    md-svg-src="{{ 'device' | icon:'ic_now_wallpaper_24px' }}">
                                </md-icon>
                            </div>
                        </template>
                    </karma-item>
                </karma-column>
                <karma-column title="Fecha" width="15">
                    <karma-item>
                        {{item.fecha | amDateFormat:'YYYY-MM-DD HH:mm:ss' | capitalize }}
                    </karma-item>
                </karma-column>
                <karma-column title="Polígono" width="25">
                    <karma-item>
                        <template>
                            {{item.poligono}}
                            <span style="color:red" ng-if="!item.poligono">SIN POLÍGONO</span>
                        </template>
                    </karma-item>
                </karma-column>
                <karma-column title="Motivo" property="motivo" width="25"></karma-column>
                <karma-column title="Conductor" property="conductor" width="20"></karma-column>
                <karma-column title="Patente" property="patente"></karma-column>
               
            </karma-table>
        </div>
    </karma-content>

</karma-page>